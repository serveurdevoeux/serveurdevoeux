<html>
{% if is_granted("IS_AUTHENTICATED_FULLY") %}  
                   {{ render (controller("SRVDVServerBundle:Default:nombreInscription" , { 'id': 'Filieres' })) }}
                      {% else %}
                      
                     {% include "SRVDVServerBundle:admin:MenuAdmin.html.twig" %}
                     {% endif %}


<div>

					<div class="table-responsive">
                <table id="example" class="display" cellspacing="0" width="98%" >
                	<thead>
					<tr><th>#Filiere</th><th>Matiere</th><th>Nombre de groupe</th><th>heures/groupe</th><th>Type Enseignant (Coef)</th><th>Semestre</th></tr>
				   </thead>
				   <tbody>
						{% for r in Matieres %}				

							{% if idAnnee  == r.filiere.anneeFiliere.id  %}
							
								<tr >
									<td>{{ r.filiere.niveau }}&nbsp;{{ r.filiere.nom }}&nbsp;{{ r.filiere.anneeFiliere}}&nbsp;&nbsp;({{ r.filiere.User.nom}}&nbsp;{{ r.filiere.User.prenom}})
					 					 {% if is_granted("ROLE_RESP") %}  
					                       &nbsp;<button  type="button" class="btn btn-danger" onclick="window.location.href ='{{path('list_form_inscription',{'id':r.filiere.id}) }}'"><b ><span class="glyphicon glyphicon-send" aria-hidden="true"></span>&nbsp; Réserver</b></button>                
					                          
					                    {% endif %}

					                    {% if is_granted("ROLE_ENSEIG") %}  
					                     &nbsp;  <button  type="button" class="btn btn-danger" onclick="window.location.href ='{{path('list_form_inscription_enseignant',{'id':r.filiere.id}) }}'"><b ><span class="glyphicon glyphicon-send" aria-hidden="true"></span>&nbsp; Réserver</b></button>                
					                          
					                    {% endif %}
                    
									</td>
									<td>{{ r. nom}}</td>
									<td>{{ r.NombreGroupe}}</td>
									<td>{{ r.nbrHeurGroupe}}</td>
									<td>{{ r.TypeEnseignant.libelle}} &nbsp;({{ r.TypeEnseignant.coef}})</td>
									<td>{{ r.semestre}}</td>								
								
									
								</tr>
							{% endif %}	
						{% endfor %}
                   </tbody>
				</table> 
            
		</div>
	
</div>

<script type="text/javascript" charset="utf-8" >

$(document).ready(function() {
    var table = $('#example').DataTable({
        "columnDefs": [
            { "visible": false, "targets": 0 }
        ],
        "order": [[ 0, 'asc' ]],
        "displayLength": 25,
        "drawCallback": function ( settings ) {
            var api = this.api();
            var rows = api.rows( {page:'current'} ).nodes();
            var last=null;
 
            api.column(0, {page:'current'} ).data().each( function ( group, i ) {
                if ( last !== group ) {
                    $(rows).eq( i ).before(
                        '<tr class="group"><td colspan="6" align="center" style="background-color:#81F7BE">'+group+'</td></tr>'
                    );
 
                    last = group;
                }
            } );
        }
    } );
 
    // Order by the grouping
    $('#example tbody').on( 'click', 'tr.group', function () {
        var currentOrder = table.order()[0];
        if ( currentOrder[0] === 2 && currentOrder[1] === 'asc' ) {
            table.order( [ 0, 'desc' ] ).draw();
        }
        else {
            table.order( [ 0, 'asc' ] ).draw();
        }
    } );
} );

</script>

{% include "SRVDVServerBundle:admin:footerAdmin.html.twig" %}



